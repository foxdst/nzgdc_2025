<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NZGDC Event Categories - Implementation Test Demo</title>

    <!-- Load unified event panel CSS -->
    <link rel="stylesheet" href="../css/unified-event-panel.css">

    <style>
        /* NZGDC Color Variables - Modified for Event Categories Testing */
        :root {
            --color-yellow: rgba(255, 236, 81, 1);
            --color-green: rgba(40, 167, 69, 1);
            --color-green-hover: rgba(35, 145, 60, 1);
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-green-bright: rgba(45, 180, 75, 1);
            --font-primary: 'Futura PT Heavy', 'Futura', Arial, sans-serif;
        }

        body {
            font-family: var(--font-primary);
            margin: 0;
            padding: 0;
            background-color: var(--color-white);
        }

        .demo-header {
            background: var(--color-green);
            color: var(--color-white);
            padding: 20px;
            text-align: center;
        }

        .demo-header h1 {
            margin: 0;
            font-size: 36px;
            font-weight: 800;
            font-family: var(--font-primary);
        }

        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-section h2 {
            color: var(--color-green);
            border-bottom: 2px solid var(--color-green);
            padding-bottom: 10px;
            font-family: var(--font-primary);
            font-weight: 800;
            margin: 0 0 20px 0;
        }

        .test-grid {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }

        .big-panels-grid {
            grid-template-columns: 1fr;
        }

        .main-panels-grid {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .category-info {
            background: rgba(40, 167, 69, 0.1);
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid var(--color-green);
        }

        .category-info h3 {
            margin: 0 0 10px 0;
            color: var(--color-green);
            font-family: var(--font-primary);
            font-weight: 600;
        }

        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
            max-height: 200px;
            overflow-y: auto;
        }

        .controls {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .controls h3 {
            margin: 0 0 15px 0;
            color: var(--color-green);
            font-family: var(--font-primary);
            font-weight: 600;
        }

        .controls button {
            background: var(--color-green);
            color: var(--color-white);
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 6px;
            cursor: pointer;
            font-family: var(--font-primary);
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .controls button:hover {
            background: var(--color-green-hover);
            transform: translateY(-1px);
        }

        .controls button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-success { background: var(--color-green); }
        .status-warning { background: #ffc107; }
        .status-error { background: #dc3545; }

        .demo-footer {
            background: var(--color-green-bright);
            color: var(--color-white);
            padding: 15px;
            text-align: center;
            font-family: var(--font-primary);
            font-weight: 600;
            margin-top: 40px;
        }

        .demo-footer button {
            background: var(--color-white);
            color: var(--color-green);
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 6px;
            cursor: pointer;
            font-family: var(--font-primary);
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .demo-footer button:hover {
            background: var(--color-yellow);
            color: var(--color-black);
        }

        #test-results {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
        }

        #results-output {
            font-family: var(--font-primary);
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .test-container {
                padding: 0 10px;
            }

            .main-panels-grid {
                grid-template-columns: 1fr;
            }

            .controls button {
                display: block;
                width: 100%;
                margin: 5px 0;
            }

            .demo-header h1 {
                font-size: 28px;
            }

            .demo-footer button {
                display: block;
                margin: 5px auto;
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <header class="demo-header">
        <h1>NZGDC Event Categories - Test Demo</h1>
        <p>Interactive testing environment for the Event Categories system</p>
    </header>

    <div class="test-container">

        <div class="category-info">
            <h3>Implementation Status</h3>
            <p><span class="status-indicator status-success"></span>11 Event Categories Implemented</p>
            <p><span class="status-indicator status-success"></span>Overlay Compatibility System Active</p>
            <p><span class="status-indicator status-success"></span>Data Validation System Enabled</p>
        </div>

        <div class="controls">
            <h3>Testing Controls</h3>
            <button onclick="enableDebugMode()">Enable Debug Mode</button>
            <button onclick="testAllCategories()">Test All Categories</button>
            <button onclick="testOverlayCompatibility()">Test Overlay System</button>
            <button onclick="testBrightnessOverlaySystem()">Test Brightness Fix v1.3</button>
            <button onclick="testInvalidCategories()">Test Error Handling</button>
            <button onclick="clearResults()">Clear Results</button>
        </div>

        <div class="debug-info" id="debug-output">
            Debug output will appear here...
        </div>

        <div class="test-section">
            <h2>Category System Overview</h2>
            <p>Testing all 11 event categories with proper color schemes and overlay compatibility.</p>

            <div class="category-info">
                <h3>Light Categories (10)</h3>
                <p>Use dark overlay (rgba(0,0,0,0.75)) with white text for readability</p>
            </div>

            <div class="category-info">
                <h3>Dark Category (1)</h3>
                <p><strong>DATA_TESTING_RESEARCH</strong> uses light overlay (rgba(255,255,255,0.25)) with black text</p>
                <p><em>v1.3 Enhancement: Improved overlay opacity from 0.15 to 0.25 for better text readability</em></p>
            </div>
        </div>

        <div class="test-section">
            <h2>Big Event Panels (620x300) - All Categories</h2>
            <div class="test-grid big-panels-grid" id="big-panels-container">
                <!-- Big panels will be generated here -->
            </div>
        </div>

        <div class="test-section">
            <h2>Main Event Panels (300x300) - All Categories</h2>
            <div class="test-grid main-panels-grid" id="main-panels-container">
                <!-- Main panels will be generated here -->
            </div>
        </div>

        <div class="test-section" id="test-results">
            <h2>Test Results</h2>
            <div id="results-output">
                <p>Run tests using the controls above to see results here.</p>
            </div>
        </div>
    </div>

    <footer class="demo-footer">
        <span>Event Categories Testing Environment | NZGDC 2025</span>
        <button onclick="location.href='widget-demo.html'">Main Widget Demo</button>
        <button onclick="location.reload()">Refresh Page</button>
        <button onclick="window.open('https://github.com/nzgdc/widgets', '_blank')">Documentation</button>
    </footer>

    <!-- Load JavaScript Dependencies -->
    <script src="../js/unified-event-loader.js"></script>

    <script>
        // Embedded template fallback for reliable loading
        window.UNIFIED_EVENT_PANEL_TEMPLATE = `
        <div class="nzgdc-event-panel-big">
            <!-- Event Panel Thumbnail (Left Side) -->
            <div class="nzgdc-event-panel-big-thumbnail">
                <!-- Session Thumbnail (Background) -->
                <div class="nzgdc-session-thumbnail-big"></div>

                <!-- Event Detail Overlay -->
                <div class="nzgdc-event-detail-overlay-big">
                    <!-- Call To Action -->
                    <div class="nzgdc-call-to-action-big">
                        <div class="nzgdc-open-marker-big"></div>
                        <div class="nzgdc-cta-text-big">Click for More Event Details</div>
                    </div>
                </div>
            </div>

            <!-- Event Panel Details (Right Side) -->
            <div class="nzgdc-event-panel-big-details">
                <!-- Event Category (Top) -->
                <div class="nzgdc-event-category-big">
                    <div class="nzgdc-category-text-big"></div>
                </div>

                <!-- Event Title (Middle) -->
                <div class="nzgdc-event-title-big">
                    <div class="nzgdc-title-text-big"></div>
                </div>

                <!-- Event Speaker Details (Bottom) -->
                <div class="nzgdc-event-speaker-details-big">
                    <!-- Introduction text (dynamically set based on widget type) -->
                    <div class="nzgdc-introduction-text-big">NZGDC 2025 Event by</div>

                    <!-- Speaker Details -->
                    <div class="nzgdc-speaker-details-big">
                        <!-- Speaker 1 -->
                        <div class="nzgdc-speaker-biolines-big">
                            <div class="nzgdc-speaker-bioName-big"></div>
                            <div class="nzgdc-speaker-bioPosition-big"></div>
                        </div>

                        <!-- Speaker 2 -->
                        <div class="nzgdc-speaker-biolines-big">
                            <div class="nzgdc-speaker-bioName-big"></div>
                            <div class="nzgdc-speaker-bioPosition-big"></div>
                        </div>

                        <!-- Speaker 3 -->
                        <div class="nzgdc-speaker-biolines-big">
                            <div class="nzgdc-speaker-bioName-big"></div>
                            <div class="nzgdc-speaker-bioPosition-big"></div>
                        </div>
                    </div>

                    <!-- Timeframe -->
                    <div class="nzgdc-timeframe-big">
                        <div class="nzgdc-timeframe-text-big"></div>
                    </div>
                </div>
            </div>
        </div>
        `;
    </script>

    <script>
        // Test Data with all 11 categories
        const TEST_EVENT_DATA = [
            {
                categoryKey: 'STORY_NARRATIVE',
                category: 'Story & Narrative',
                title: 'Advanced Interactive Storytelling Workshop',
                timeframe: '90 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Sarah Mitchell', position: 'Lead Writer at Narrative Studios' },
                    { name: 'Marcus Williams', position: 'Story Director at GameCorp' }
                ]
            },
            {
                categoryKey: 'PRODUCTION_QA',
                category: 'Production & QA',
                title: 'Quality Assurance Best Practices',
                timeframe: '60 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Emily Roberts', position: 'QA Lead at TestStudio' }
                ]
            },
            {
                categoryKey: 'CULTURE',
                category: 'Culture',
                title: 'Building Inclusive Gaming Communities',
                timeframe: '45 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Maya Singh', position: 'Community Director at DiverseGames' }
                ]
            },
            {
                categoryKey: 'BUSINESS_MARKETING',
                category: 'Business & Marketing',
                title: 'Indie Game Marketing on a Budget',
                timeframe: '75 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Dana Kim', position: 'Marketing Strategist at IndieFund' }
                ]
            },
            {
                categoryKey: 'ART',
                category: 'Art',
                title: '3D Character Design Masterclass',
                timeframe: '120 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Alex Rodriguez', position: '3D Artist at VisualCraft' }
                ]
            },
            {
                categoryKey: 'AUDIO',
                category: 'Audio',
                title: 'Interactive Audio Design Workshop',
                timeframe: '90 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Jamie Lee', position: 'Audio Director at SoundWave' }
                ]
            },
            {
                categoryKey: 'PROGRAMMING',
                category: 'Programming',
                title: 'Advanced Shader Programming Techniques',
                timeframe: '105 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Robert Chen', position: 'Graphics Programmer at TechEngine' }
                ]
            },
            {
                categoryKey: 'DATA_TESTING_RESEARCH',
                category: 'Data, Testing or Research',
                title: 'Game Analytics and Player Behavior Research',
                timeframe: '60 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Dr. Lisa Park', position: 'Research Director at DataGames' }
                ]
            },
            {
                categoryKey: 'REALITIES_VR_AR_MR',
                category: 'Realities (VR, AR, MR)',
                title: 'Virtual Reality Game Development',
                timeframe: '90 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Tom Wilson', position: 'VR Developer at ImmersiveTech' }
                ]
            },
            {
                categoryKey: 'GAME_DESIGN',
                category: 'Game Design',
                title: 'Psychology in Game Design',
                timeframe: '75 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Rachel Green', position: 'Game Designer at PlayLab' }
                ]
            },
            {
                categoryKey: 'SERIOUS_EDUCATIONAL',
                category: 'Serious & Educational Games',
                title: 'Educational Game Development Workshop',
                timeframe: '90 minutes',
                thumbnail: '',
                speakers: [
                    { name: 'Dr. Amanda Foster', position: 'EdTech Researcher at EduGames' }
                ]
            }
        ];

        let eventLoader = null;
        let debugMode = false;

        // Initialize the demo
        async function initDemo() {
            try {
                // Enable debug mode for detailed logging
                window.NZGDC_DEBUG = true;

                debugOutput('Initializing Event Categories Demo...');
                debugOutput('Debug mode enabled for template loading');

                eventLoader = new UnifiedEventLoader();
                await eventLoader.loadTemplate();

                debugOutput('Template loaded successfully');

                generateAllPanels();

                debugOutput('Demo initialization complete');
                updateResults('✅ Demo initialized successfully');

            } catch (error) {
                debugOutput(`Error initializing demo: ${error.message}`);
                updateResults(`❌ Initialization failed: ${error.message}`);
            }
        }

        function generateAllPanels() {
            const bigContainer = document.getElementById('big-panels-container');
            const mainContainer = document.getElementById('main-panels-container');

            bigContainer.innerHTML = '';
            mainContainer.innerHTML = '';

            TEST_EVENT_DATA.forEach((eventData, index) => {
                try {
                    // Generate big panel
                    const bigPanel = eventLoader.createEventPanel(eventData, 'big', 'morning');
                    bigContainer.appendChild(bigPanel);

                    // Generate main panel
                    const mainPanel = eventLoader.createEventPanel(eventData, 'main', 'morning');
                    mainContainer.appendChild(mainPanel);

                    debugOutput(`Generated panels for category: ${eventData.categoryKey}`);

                } catch (error) {
                    debugOutput(`Error generating panels for ${eventData.categoryKey}: ${error.message}`);
                }
            });
        }

        function enableDebugMode() {
            window.NZGDC_DEBUG = true;
            debugMode = true;
            debugOutput('Debug mode enabled - check console for detailed logs');
            updateResults('✅ Debug mode enabled');
        }

        function testAllCategories() {
            debugOutput('Testing all 11 categories...');

            const results = [];
            const bigPanels = document.querySelectorAll('#big-panels-container .nzgdc-event-panel-big');
            const mainPanels = document.querySelectorAll('#main-panels-container .nzgdc-event-panel-main');

            // Test big panels
            bigPanels.forEach((panel, index) => {
                const category = panel.getAttribute('data-category');
                const brightness = panel.getAttribute('data-category-brightness');
                const categoryEl = panel.querySelector('.nzgdc-event-category-big');

                if (category && brightness && categoryEl) {
                    results.push(`✅ Big Panel ${index + 1}: ${category} (${brightness})`);
                } else {
                    results.push(`❌ Big Panel ${index + 1}: Missing attributes or elements`);
                }
            });

            // Test main panels
            mainPanels.forEach((panel, index) => {
                const category = panel.getAttribute('data-category');
                const brightness = panel.getAttribute('data-category-brightness');
                const categoryEl = panel.querySelector('.nzgdc-event-category-main');

                if (category && brightness && categoryEl) {
                    results.push(`✅ Main Panel ${index + 1}: ${category} (${brightness})`);
                } else {
                    results.push(`❌ Main Panel ${index + 1}: Missing attributes or elements`);
                }
            });

            updateResults(results.join('<br>'));
            debugOutput('Category testing complete');
        }

        function testOverlayCompatibility() {
            debugOutput('Testing overlay compatibility...');

            const results = [];
            const lightCategories = [];
            const darkCategories = [];

            document.querySelectorAll('[data-category-brightness]').forEach(panel => {
                const brightness = panel.getAttribute('data-category-brightness');
                const category = panel.getAttribute('data-category');

                if (brightness === 'light') {
                    lightCategories.push(category);
                } else if (brightness === 'dark') {
                    darkCategories.push(category);
                }
            });

            results.push(`✅ Light categories (${lightCategories.length}): ${[...new Set(lightCategories)].join(', ')}`);
            results.push(`✅ Dark categories (${darkCategories.length}): ${[...new Set(darkCategories)].join(', ')}`);

            // Verify expected dark category
            if (darkCategories.includes('DATA_TESTING_RESEARCH')) {
                results.push('✅ DATA_TESTING_RESEARCH correctly identified as dark category');
            } else {
                results.push('❌ DATA_TESTING_RESEARCH not found or incorrect brightness');
            }

            updateResults(results.join('<br>'));
            debugOutput('Overlay compatibility testing complete');
        }

        function testBrightnessOverlaySystem() {
            debugOutput('Testing brightness overlay system fix v1.3...');

            const results = [];
            let testsPassed = 0;
            let testsTotal = 0;

            // Test 1: Verify overlay container context requirements
            debugOutput('Test 1: Checking CSS selector specificity...');
            const testPanels = document.querySelectorAll('[data-category][data-category-brightness]');

            testPanels.forEach(panel => {
                const category = panel.getAttribute('data-category');
                const brightness = panel.getAttribute('data-category-brightness');

                // Check for overlay containers
                const bigOverlay = panel.querySelector('.nzgdc-event-detail-overlay-big');
                const mainOverlay = panel.querySelector('.nzgdc-event-panel-overlay-main');

                if (bigOverlay || mainOverlay) {
                    testsTotal++;
                    results.push(`✅ Panel ${category}: Overlay container found`);
                    testsPassed++;

                    // Test CTA elements within overlay context
                    const ctaText = (bigOverlay || mainOverlay).querySelector('[class*="nzgdc-cta-text"]');
                    const ctaMarker = (bigOverlay || mainOverlay).querySelector('[class*="nzgdc-open-marker"]');

                    if (ctaText && ctaMarker) {
                        testsTotal++;
                        results.push(`✅ Panel ${category}: CTA elements found in overlay context`);
                        testsPassed++;
                    } else {
                        testsTotal++;
                        results.push(`❌ Panel ${category}: Missing CTA elements in overlay`);
                    }
                }
            });

            // Test 2: Verify dark category opacity enhancement
            debugOutput('Test 2: Checking dark category overlay opacity...');
            const darkPanels = document.querySelectorAll('[data-category-brightness="dark"]');

            darkPanels.forEach(panel => {
                const category = panel.getAttribute('data-category');
                testsTotal++;

                if (category === 'DATA_TESTING_RESEARCH') {
                    results.push(`✅ Dark category ${category}: Correctly identified`);
                    testsPassed++;

                    // Check computed styles for overlay opacity
                    const overlay = panel.querySelector('.nzgdc-event-detail-overlay-big, .nzgdc-event-panel-overlay-main');
                    if (overlay) {
                        testsTotal++;
                        results.push(`✅ Dark category overlay: Container found for enhanced opacity test`);
                        testsPassed++;
                    }
                } else {
                    results.push(`❌ Unexpected dark category: ${category}`);
                }
            });

            // Test 3: Verify light category overlay behavior
            debugOutput('Test 3: Checking light category overlay behavior...');
            const lightPanels = document.querySelectorAll('[data-category-brightness="light"]');
            const expectedLightCount = 10; // Should be 10 light categories

            testsTotal++;
            if (lightPanels.length >= expectedLightCount) {
                results.push(`✅ Light categories: Found ${lightPanels.length} (expected ~${expectedLightCount})`);
                testsPassed++;
            } else {
                results.push(`❌ Light categories: Found ${lightPanels.length}, expected ~${expectedLightCount}`);
            }

            // Test 4: Verify non-category panels are unaffected
            debugOutput('Test 4: Checking non-category panel isolation...');
            const nonCategoryPanels = document.querySelectorAll('.nzgdc-event-panel-big:not([data-category]), .nzgdc-event-panel-main:not([data-category])');

            testsTotal++;
            results.push(`✅ Non-category panels: ${nonCategoryPanels.length} panels found (should be unaffected by brightness system)`);
            testsPassed++;

            // Test 5: Verify brightness assignment correctness
            debugOutput('Test 5: Validating brightness assignments...');
            const brightnessMap = new Map();

            document.querySelectorAll('[data-category][data-category-brightness]').forEach(panel => {
                const category = panel.getAttribute('data-category');
                const brightness = panel.getAttribute('data-category-brightness');
                brightnessMap.set(category, brightness);
            });

            testsTotal++;
            const darkCategoryCorrect = brightnessMap.get('DATA_TESTING_RESEARCH') === 'dark';
            if (darkCategoryCorrect) {
                results.push(`✅ Brightness assignment: DATA_TESTING_RESEARCH correctly assigned 'dark'`);
                testsPassed++;
            } else {
                results.push(`❌ Brightness assignment: DATA_TESTING_RESEARCH incorrect brightness`);
            }

            // Calculate test results
            const successRate = ((testsPassed / testsTotal) * 100).toFixed(1);

            results.unshift(`<strong>Brightness Overlay System Fix v1.3 Validation</strong>`);
            results.unshift(`<strong>Tests Passed: ${testsPassed}/${testsTotal} (${successRate}%)</strong>`);

            if (testsPassed === testsTotal) {
                results.unshift(`<span style="color: #28a745;">✅ ALL TESTS PASSED - Brightness overlay system working correctly</span>`);
            } else {
                results.unshift(`<span style="color: #dc3545;">⚠️ SOME TESTS FAILED - Review brightness overlay implementation</span>`);
            }

            updateResults(results.join('<br>'));
            debugOutput(`Brightness overlay system testing complete: ${testsPassed}/${testsTotal} tests passed`);
        }

        function testInvalidCategories() {
            debugOutput('Testing invalid category handling...');

            const invalidEventData = {
                categoryKey: 'INVALID_CATEGORY',
                category: 'Invalid Category',
                title: 'Test Invalid Category Event',
                timeframe: '30 minutes',
                speakers: [{ name: 'Test Speaker', position: 'Test Position' }]
            };

            try {
                const testPanel = eventLoader.createEventPanel(invalidEventData, 'big', 'morning');
                const category = testPanel.getAttribute('data-category');

                if (category === 'PROGRAMMING') {
                    updateResults('✅ Invalid categories correctly fallback to PROGRAMMING');
                } else {
                    updateResults(`❌ Invalid category fallback failed: got ${category}`);
                }

                // Clean up test panel
                testPanel.remove();

            } catch (error) {
                updateResults(`❌ Error handling test failed: ${error.message}`);
            }

            debugOutput('Invalid category testing complete');
        }

        function clearResults() {
            document.getElementById('results-output').innerHTML = '<p>Results cleared. Run tests using the controls above.</p>';
            document.getElementById('debug-output').innerHTML = 'Debug output cleared...';
        }

        function debugOutput(message) {
            const debugEl = document.getElementById('debug-output');
            const timestamp = new Date().toLocaleTimeString();
            debugEl.innerHTML += `<br>[${timestamp}] ${message}`;
            debugEl.scrollTop = debugEl.scrollHeight;
        }

        function updateResults(content) {
            document.getElementById('results-output').innerHTML = content;
        }

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', initDemo);

        // Add some additional utility functions for manual testing
        window.testCategorySystem = {
            loader: () => eventLoader,
            testData: TEST_EVENT_DATA,
            generatePanel: (categoryKey, panelType = 'big') => {
                const eventData = TEST_EVENT_DATA.find(e => e.categoryKey === categoryKey);
                if (eventData) {
                    return eventLoader.createEventPanel(eventData, panelType, 'morning');
                }
                return null;
            }
        };
    </script>
</body>
</html>
